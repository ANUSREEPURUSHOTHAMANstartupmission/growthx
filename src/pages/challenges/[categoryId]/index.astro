---
import { categories } from "../../../components/categories.js";
import Navbarbottom from "../../../components/Navbar.svelte";
import Layout from '../../../layouts/Layout.astro';

export function getStaticPaths() {
  return categories.map(cat => ({
    params: { categoryId: cat.id }
  }));
}

const { categoryId } = Astro.params;
const category = categories.find(c => c.id === categoryId);
---
<Layout>
<Navbarbottom client:load></Navbarbottom>

<div class="service-area">
  <div class="container">

    <!-- Back -->
    <div class="mb-6">
      <a
        href="/#problemstatements"
        class="page-scroll inline-flex items-center gap-2 text-blue-700 hover:underline"
      >
        ← Back
      </a>
    </div>

    {category ? (
      <>
        <!-- Heading -->
        <div class="pb-6">
          <div class=" left">
            <h1>
              <span class="text-green-800 text-2xl md:text-3xl font-bold"> {category.name}</span>
            </h1>
          </div>
        </div>

        <!-- Problem Statements List -->
        <div class="flex flex-col mx-auto pt-6">
          <div id="problemstatements" class="flex flex-col">

            {category.problem_statements.map(ps => (
              <a
                href={`/challenges/${category.id}/${ps.ps_id}`}
                class="group flex items-center justify-between gap-6 rounded-xl mb-4
                       bg-[#e9ebea] transition p-4
                       border-b hover:shadow-xl duration-700 overflow-hidden"
              >
                <!-- LEFT -->
                <div class="flex md:flex-row flex-col gap-4 bg-white p-4 w-full rounded-lg">
                  <div class="flex-1">
                    {/* <div class="text-sm text-slate-500 mb-1">
                      Challenge {ps.ps_id}
                    </div> */}

                    <h2 class="text-xl font-semibold text-slate-900 group-hover:text-green-700">
                      {ps.title}
                    </h2>
                    <p class="text-sm text-green-700">
                       Challenge ID : {ps.ps_id}
                    </p>

                    <p class="mt-2 text-sm text-slate-500 max-w-3xl">
                      {ps.problem_statement[0]?.text.slice(0, 160)}…
                    </p>
                  </div>

                <!-- RIGHT -->
                  <div class="flex items-center gap-2 text-indigo-700 font-medium whitespace-nowrap">
                    View Challenge
                    <span class="text-lg leading-none">→</span>
                  </div>
                </div>
              </a>
            ))}

          </div>
        </div>
      </>
    ) : (
      <p class="text-red-500">Category not found</p>
    )}

  </div>
</div>
</Layout>